@model IEnumerable<BitacoraDireccionesIp.Models.tb_bit_usuario>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<div class="row-fluid">
<table class="table table-striped">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.pk_cve_usuario)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.nom_user_name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.nom_usuario)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ape_paterno)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ape_materno)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.tb_bit_cat_dga.des_dga)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.tb_bit_cat_area.des_area)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.tb_bit_cat_empresa.des_empresa)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.tb_bit_cat_piso.des_piso)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.tb_bit_cat_regional.des_regional)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.des_observacion)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.fec_alta)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.fec_baja)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.fec_actualiza)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.pk_cve_usuario)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.nom_user_name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.nom_usuario)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ape_paterno)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ape_materno)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tb_bit_cat_dga.des_dga)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tb_bit_cat_area.des_area)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tb_bit_cat_empresa.des_empresa)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tb_bit_cat_piso.des_piso)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.tb_bit_cat_regional.des_regional)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.des_observacion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.fec_alta)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.fec_baja)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.fec_actualiza)
        </td>
        <td>
            @Html.ActionLink("Detalle", "Details", new { id=item.pk_cve_usuario}) |            
            @Html.ActionLink("Borrar", "Delete", new { id=item.pk_cve_usuario })  |          
            <a href="@Url.Action("Edit", new { id=item.pk_cve_usuario })"  class="modalUsuario">Editar usuario</a>|
            <a href="@Url.Action("ListByUser", "tb_bit_ip", new { cveusuario = item.pk_cve_usuario })"  class="detalleUsuario">Detalle direcciones</a>                        
        </td>
    </tr>
}

</table>
</div>
<div class="row-fluid" id="detalle">

</div>


<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body" id="modalBody">
    
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>    
  </div>
</div>

<script type="text/javascript">
 $(function() {
     $('.detalleUsuario').click(function (e) {
       e.preventDefault();
       $('#detalle').load($(this).attr('href'));
     });


     $('.modalUsuario').click(function (e) {
         e.preventDefault();
         $('#modalBody').load($(this).attr('href'));
         $('#myModal').modal('show');         
     });     
 });
</script>

